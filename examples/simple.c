// Простая программа для AT89S4051 - мигание светодиода
// Демонстрирует основные возможности HCL компилятора

#include <reg51.h>

// Определения для удобства
#define LED_PORT P1
#define LED_PIN  0
#define DELAY_COUNT 50000

// Объявление битовой переменной (расширение 8051)
sbit LED = P1^0;  // Светодиод подключен к порту P1.0

// Функция задержки
void delay(unsigned int count) {
    unsigned int i, j;
    for (i = 0; i < count; i++) {
        for (j = 0; j < 100; j++) {
            // Пустой цикл для задержки
        }
    }
}

// Главная функция
int main() {
    // Инициализация
    LED = 0;  // Выключаем светодиод
    
    // Основной цикл
    while (1) {
        LED = 1;           // Включаем светодиод
        delay(DELAY_COUNT); // Задержка
        
        LED = 0;           // Выключаем светодиод  
        delay(DELAY_COUNT); // Задержка
    }
    
    return 0;  // Никогда не достигается
} 