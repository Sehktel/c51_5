# Документация компилятора C51

## 📚 Обзор

Данная папка содержит всю техническую документацию проекта компилятора C51, включая планы развития, архитектурные решения и руководства по разработке.

---

## 📋 Планы развития

### 🎯 Активные планы
- **[План улучшения AST](AST_IMPROVEMENT_PLAN.md)** - Детальный план рефакторинга модуля AST с приоритетами и временными рамками

### 🔮 Будущие планы
- **Parser Enhancement Plan** - Планируется
- **IR Optimization Plan** - Планируется  
- **Code Generation Plan** - Планируется

---

## 🏗 Архитектурная документация

### Текущая архитектура
```
c51cc/
├── src/c51cc/
│   ├── preprocessor.clj    ; Препроцессор
│   ├── lexer.clj          ; Лексический анализатор
│   ├── parser.clj         ; Синтаксический анализатор
│   ├── ast.clj            ; Абстрактное синтаксическое дерево
│   ├── semantic.clj       ; Семантический анализатор
│   ├── ir.clj             ; Промежуточное представление
│   ├── optimizer.clj      ; Оптимизатор
│   └── codegen.clj        ; Генератор кода
└── test/                  ; Тесты
```

### Планируемая архитектура (после рефакторинга AST)
```
c51cc/
├── src/c51cc/
│   ├── preprocessor.clj
│   ├── lexer.clj
│   ├── parser.clj
│   ├── ast/               ; Модульная структура AST
│   │   ├── types.clj
│   │   ├── constructors.clj
│   │   ├── validation/
│   │   ├── visitor.clj
│   │   ├── analysis.clj
│   │   ├── transform.clj
│   │   ├── optimization/
│   │   └── pretty_print.clj
│   ├── ast.clj           ; Главный модуль AST
│   ├── semantic.clj
│   ├── ir.clj
│   ├── optimizer.clj
│   └── codegen.clj
└── test/
```

---

## 📊 Статус проекта

### Текущее состояние модулей

| Модуль | Статус | Покрытие тестами | Документация |
|--------|--------|------------------|--------------|
| Preprocessor | ✅ Готов | 🟡 Частично | 🔴 Отсутствует |
| Lexer | ✅ Готов | 🟡 Частично | 🔴 Отсутствует |
| Parser | ✅ Готов | 🟡 Частично | 🔴 Отсутствует |
| AST | 🟡 Требует рефакторинга | 🟡 Частично | 🟡 Частично |
| Semantic | 🔴 В разработке | 🔴 Отсутствует | 🔴 Отсутствует |
| IR | 🔴 В разработке | 🔴 Отсутствует | 🔴 Отсутствует |
| Optimizer | 🔴 Планируется | 🔴 Отсутствует | 🔴 Отсутствует |
| Codegen | 🔴 Планируется | 🔴 Отсутствует | 🔴 Отсутствует |

### Легенда
- ✅ Готов - Модуль полностью реализован и протестирован
- 🟡 Частично - Модуль работает, но требует улучшений
- 🔴 Отсутствует/Планируется - Модуль не реализован или требует создания

---

## 🎯 Приоритеты развития

### Milestone 1: AST Refactoring (11-15 недель)
**Цель:** Создать масштабируемую и производительную основу для AST

**Ключевые задачи:**
1. Модульность AST
2. Система валидации (Malli + Schema)
3. Plugin система оптимизаций (-O0 до -O3)
4. Мультиметоды для walk-ast

### Milestone 2: Semantic Analysis (6-8 недель)
**Цель:** Реализовать полноценный семантический анализ

**Ключевые задачи:**
1. Система типов C51
2. Таблица символов
3. Проверка семантических правил
4. Интеграция с AST

### Milestone 3: IR & Optimization (8-10 недель)
**Цель:** Создать эффективное промежуточное представление

**Ключевые задачи:**
1. Дизайн IR
2. Трансляция AST → IR
3. Базовые оптимизации
4. Анализ потока данных

---

## 🛠 Инструменты разработки

### Основные зависимости
```clojure
:dependencies [
  [org.clojure/clojure "1.11.1"]
  
  ;; Планируемые для AST
  [metosin/malli "0.13.0"]           ; Валидация схем
  [prismatic/schema "1.4.1"]         ; Альтернативная валидация
  [org.clojure/core.match "1.0.1"]   ; Pattern matching
  [criterium "0.4.6"]                ; Профилирование
]
```

### Инструменты качества кода
- **clj-kondo** - Статический анализ
- **cljfmt** - Форматирование кода
- **eastwood** - Дополнительные проверки
- **kibit** - Предложения по улучшению кода

### Профилирование и мониторинг
- **Criterium** - Микробенчмарки
- **VisualVM** - Профилирование JVM
- **Java Flight Recorder** - Production профилирование

---

## 📖 Руководства

### Для разработчиков
- **[Coding Standards](coding-standards.md)** - Планируется
- **[Testing Guidelines](testing-guidelines.md)** - Планируется
- **[Architecture Decisions](architecture-decisions.md)** - Планируется

### Для контрибьюторов
- **[Contributing Guide](../CONTRIBUTING.md)** - Планируется
- **[Code Review Process](code-review-process.md)** - Планируется

---

## 📞 Контакты и поддержка

### Команда разработки
- **Архитектор:** TBD
- **Lead Developer:** TBD
- **QA Engineer:** TBD

### Процесс принятия решений
1. **RFC (Request for Comments)** для крупных изменений
2. **Code Review** для всех изменений
3. **Architecture Review** для архитектурных решений

---

**Последнее обновление:** $(date)  
**Версия документации:** 1.0 