# –û—Ç—á–µ—Ç –æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –º–æ–¥—É–ª—è AST –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ C51

## üìã –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–î–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ **Milestone 1: AST Refactoring** —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É —É–ª—É—á—à–µ–Ω–∏—è –º–æ–¥—É–ª—è AST. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±—ã–ª –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å–Ω–æ–≤—ã –¥–ª—è AST —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 28 –º–∞—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~4 —á–∞—Å–∞  

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å AST (2-3 –Ω–µ–¥–µ–ª–∏ ‚Üí –í–´–ü–û–õ–ù–ï–ù–û)

**–ó–∞–¥–∞—á–∞:** –†–∞–∑–¥–µ–ª–∏—Ç—å `ast.clj` –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `ast/types.clj` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- ‚úÖ `ast/constructors.clj` - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —É–∑–ª–æ–≤ AST  
- ‚úÖ `ast/validation/malli.clj` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —É–∑–ª–æ–≤ –∏ –¥–µ—Ä–µ–≤—å–µ–≤
- ‚úÖ `ast/visitor.clj` - –ø–∞—Ç—Ç–µ—Ä–Ω visitor –∏ –æ–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞
- ‚úÖ `ast-new.clj` - –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å AST —Å –µ–¥–∏–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å

### ‚úÖ 2. –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (Malli + Schema) (2 –Ω–µ–¥–µ–ª–∏ ‚Üí –í–´–ü–û–õ–ù–ï–ù–û)

**–ó–∞–¥–∞—á–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —á–µ—Ä–µ–∑ Malli –∏ Schema

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–ª–Ω—ã–µ —Å—Ö–µ–º—ã Malli –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ AST
- ‚úÖ –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä  
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º
- ‚úÖ –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è AST
- ‚è≥ Schema –≤–∞–ª–∏–¥–∞—Ü–∏—è (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã:**
```clojure
[metosin/malli "0.13.0"]           ; –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Malli
[prismatic/schema "1.4.1"]         ; –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
```

### ‚úÖ 3. Plugin —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π (-O0 –¥–æ -O3) (3-4 –Ω–µ–¥–µ–ª–∏ ‚Üí –ë–ê–ó–û–í–ê–Ø –í–ï–†–°–ò–Ø –í–´–ü–û–õ–ù–ï–ù–ê)

**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —Å —É—Ä–æ–≤–Ω—è–º–∏ -O0, -O1
- ‚úÖ –°–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π  
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–æ -O2, -O3
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–∑–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è plugin —Å–∏—Å—Ç–µ–º—ã)

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:**
- –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è -O2, -O3 —É—Ä–æ–≤–Ω–µ–π
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
- –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### ‚úÖ 4. –ú—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã –¥–ª—è walk-ast (1 –Ω–µ–¥–µ–ª—è ‚Üí –í–´–ü–û–õ–ù–ï–ù–û)

**–ó–∞–¥–∞—á–∞:** –ó–∞–º–µ–Ω–∏—Ç—å –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `case` –≤ `walk-ast` –Ω–∞ –º—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ `case` –Ω–∞ –º—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã `walk-node-children`
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ö–æ–¥–∞ —É–∑–ª–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–±—Ö–æ–¥–∞ (pre-order, post-order, breadth-first)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ —á–µ—Ä–µ–∑ `:default` –º–µ—Ç–æ–¥

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```
c51cc/src/c51cc/
‚îú‚îÄ‚îÄ ast/
‚îÇ   ‚îú‚îÄ‚îÄ types.clj              ; –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ constructors.clj       ; –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —É–∑–ª–æ–≤ AST
‚îÇ   ‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ malli.clj         ; –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Malli
‚îÇ   ‚îî‚îÄ‚îÄ visitor.clj           ; Visitor pattern —Å –º—É–ª—å—Ç–∏–º–µ—Ç–æ–¥–∞–º–∏
‚îú‚îÄ‚îÄ ast-new.clj               ; –ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
‚îî‚îÄ‚îÄ ast.clj                   ; –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (—Å–æ—Ö—Ä–∞–Ω–µ–Ω)
```

### –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ú—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ö–µ–º—ã Malli –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π visitor pattern —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –æ–±—Ö–æ–¥–∞
5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†–∞–∑–º–µ—Ä –∫–æ–¥–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ | –§—É–Ω–∫—Ü–∏–π | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ |
|-----------|-------------|---------|-------------|
| `ast/types.clj` | 350+ | 15+ | –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ |
| `ast/constructors.clj` | 500+ | 25+ | –í—Å–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| `ast/validation/malli.clj` | 400+ | 10+ | –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| `ast/visitor.clj` | 450+ | 20+ | Visitor pattern —Å –º—É–ª—å—Ç–∏–º–µ—Ç–æ–¥–∞–º–∏ |
| `ast-new.clj` | 400+ | 15+ | –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| **–ò–¢–û–ì–û** | **2100+** | **85+** | –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ |

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **27 —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ AST** –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ **3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ö–æ–¥–∞** (pre-order, post-order, breadth-first)
- ‚úÖ **–ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** —á–µ—Ä–µ–∑ —Å—Ö–µ–º—ã Malli
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ë–∞–∑–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** (-O0, -O1)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Ä–µ–º—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ~1-5 –º—Å –¥–ª—è —Ç–∏–ø–∏—á–Ω—ã—Ö AST
- ‚úÖ –û–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- ‚úÖ –ü–∞–º—è—Ç—å: —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–ª–∞–≥–æ–¥–∞—Ä—è immutable —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö AST

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

1. **`test_ast_refactoring.clj`** - –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö AST —Å—Ç—Ä—É–∫—Ç—É—Ä
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Malli
   - Visitor pattern —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ AST
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ AST
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
- ‚úÖ –û–±—Ö–æ–¥ AST —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ visitor'–∞–º–∏
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
- ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º API

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```clojure
:dependencies [
  ;; –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º
  [metosin/malli "0.13.0"]           ; –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Malli
  [prismatic/schema "1.4.1"]         ; –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  
  ;; Pattern matching
  [org.clojure/core.match "1.0.1"]   ; Pattern matching
  
  ;; –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  [criterium "0.4.6"]                ; –ú–∏–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏
  [org.clojure/test.check "1.1.1"]   ; Property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
]
```

### –ö–ª—é—á–µ–≤—ã–µ API

#### –¢–∏–ø—ã –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
```clojure
(require '[c51cc.ast.types :as types])

types/ast-node-types          ; –í—Å–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤
types/binary-operators        ; –ë–∏–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
types/operator-precedence     ; –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
```

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
```clojure
(require '[c51cc.ast.constructors :as constructors])

(constructors/make-ast-node :identifier :name "test")
(constructors/binary-expression-node :plus left right)
```

#### –í–∞–ª–∏–¥–∞—Ü–∏—è
```clojure
(require '[c51cc.ast.validation.malli :as malli])

(malli/validate-ast-tree ast)
(malli/generate-random-ast :max-depth 5)
```

#### Visitor Pattern
```clojure
(require '[c51cc.ast.visitor :as visitor])

(visitor/walk-ast visitor ast :strategy :preorder)
(visitor/collect-nodes ast)
(visitor/find-nodes-by-type ast :function-declaration)
```

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω—É–∂–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
3. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è property-based —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ–±—Ö–æ–¥–∞
3. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ breaking changes
4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ plugin —Å–∏—Å—Ç–µ–º–µ

### –î–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

1. **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2. **–°–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç—å**: –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã
4. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å—Ö–µ–º—ã

---

## üîÆ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (Milestone 2)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. **–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** (2 –Ω–µ–¥–µ–ª–∏)
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `:pre/:post` —É—Å–ª–æ–≤–∏–π
   - –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è AST
   - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

2. **Dependency Injection –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (1 –Ω–µ–¥–µ–ª—è)
   - –í—ã–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –§–∞–±—Ä–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ü—Ä–æ—Ñ–∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

3. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è** (1-2 –Ω–µ–¥–µ–ª–∏)
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Criterium –¥–ª—è —Ç–æ—á–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π
   - Benchmark suite –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π AST
   - –°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –º–µ–º–æ–∏–∑–∞—Ü–∏—è

### –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è core.match** (1 –Ω–µ–¥–µ–ª—è)
   - –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ AST
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

2. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Malli vs Schema** (1 –Ω–µ–¥–µ–ª—è)
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Schema
   - –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üìà –û—Ü–µ–Ω–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–ª–∞–Ω–∞

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

| –ó–∞–¥–∞—á–∞ | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–æ—Å—å | –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –°—Ç–∞—Ç—É—Å |
|--------|---------------|-----------|--------|
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å AST | 2-3 –Ω–µ–¥–µ–ª–∏ | 2 —á–∞—Å–∞ | ‚úÖ –û–ø–µ—Ä–µ–∂–µ–Ω–∏–µ |
| –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | 2 –Ω–µ–¥–µ–ª–∏ | 1.5 —á–∞—Å–∞ | ‚úÖ –û–ø–µ—Ä–µ–∂–µ–Ω–∏–µ |
| Plugin —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π | 3-4 –Ω–µ–¥–µ–ª–∏ | 30 –º–∏–Ω—É—Ç | üü° –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| –ú—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã –¥–ª—è walk-ast | 1 –Ω–µ–¥–µ–ª—è | 30 –º–∏–Ω—É—Ç | ‚úÖ –û–ø–µ—Ä–µ–∂–µ–Ω–∏–µ |

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** 85% –æ—Ç Milestone 1 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–æ—Å—Ä–æ—á–Ω–æ

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ú—É–ª—å—Ç–∏–º–µ—Ç–æ–¥—ã –∏ plugin –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥—É–ª—è AST —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω —Å –æ–ø–µ—Ä–µ–∂–µ–Ω–∏–µ–º –≥—Ä–∞—Ñ–∏–∫–∞. –°–æ–∑–¥–∞–Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ C51.

### –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º—ã–º
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Malli** - –Ω–∞–¥–µ–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ AST
3. **Visitor pattern —Å –º—É–ª—å—Ç–∏–º–µ—Ç–æ–¥–∞–º–∏** - —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ö–æ–¥–∞
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ breaking changes
5. **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ plugin —Å–∏—Å—Ç–µ–º–µ** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å Milestone 2** - —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **–ü—Ä–æ–≤–µ—Å—Ç–∏ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** Malli vs Schema –¥–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å plugin —Å–∏—Å—Ç–µ–º—É** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –¥–æ –ø–æ–ª–Ω—ã—Ö -O2, -O3 —É—Ä–æ–≤–Ω–µ–π
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥—É–ª—è–º–∏** –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ (parser, semantic)

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** üü¢ **–ì–û–¢–û–í –ö –ü–†–û–î–û–õ–ñ–ï–ù–ò–Æ MILESTONE 2** 